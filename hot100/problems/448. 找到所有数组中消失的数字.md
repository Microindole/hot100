### 找出所有数组中消失的数字



> 给你一个含 `n` 个整数的数组 `nums` ，其中 `nums[i]` 在区间 `[1, n]` 内。请你找出所有在 `[1, n]` 范围内但没有出现在 `nums` 中的数字，并以数组的形式返回结果。
>
>  
>
> **示例 1：**
>
> ```powershell
> 输入：nums = [4,3,2,7,8,2,3,1]
> 输出：[5,6]
> ```
>
> **示例 2：**
>
> ```powershell
> 输入：nums = [1,1]
> 输出：[2]
> ```
>
>  
>
> **提示：**
>
> - `n == nums.length`
> - `1 <= n <= 105`
> - `1 <= nums[i] <= n`
>
> **进阶：**你能在不使用额外空间且时间复杂度为 `O(n)` 的情况下解决这个问题吗? 你可以假定返回的数组不算在额外空间内。



### code

```C++
// #include <unordered_set>
#include <cmath>

class Solution {
public:
    // vector<int> findDisappearedNumbers(vector<int>& nums) {
    //     unordered_set<int> map(nums.begin(), nums.end());
    //     vector<int> result;
    //     for(int i = 1;i<=nums.size();i++){
    //         if(!map.count(i)){
    //             result.push_back(i);
    //         }
    //     }
    //     return result;
    // }
    vector<int> findDisappearedNumbers(vector<int>& nums) {
        vector<int> result;
        for (int num : nums) {
            int index = abs(num) - 1;
            if (nums[index] > 0) {
                nums[index] = -nums[index];
            }
        }
        for (int i = 0; i < nums.size(); i++) {
            if (nums[i] > 0)
                result.push_back(i + 1);
        }
        return result;
    }
};
```



两种方法（哈希表法和修改原数组法），注释的是哈希表法，不满足进阶要求。

**关键信息**: 题目给了一个非常重要的约束：`nums[i]` 的值在区间 `[1, n]` 内，并且数组的长度也是 `n`。

**映射关系**: 这意味着，数组中的**值** `x` 可以和数组的**下标** `x-1` 建立一一对应的关系。例如，数字 `1` 对应下标 `0`，数字 `2` 对应下标 `1`，...，数字 `n` 对应下标 `n-1`。

修改数组法举例场景：

> 有一个班级，座位号是从 `1` 到 `n`。现在，`n` 个学生走进教室，每个学生的学号也在 `1` 到 `n` 的范围内。但是，有些学号的学生缺席了，而有些学号的学生则来了不止一个（比如双胞胎）。
>
> 你的任务是找出哪些**座位号**是空着的，但你手上**没有额外的纸和笔**（不能使用额外空间），你只能利用教室里的座位本身来做记录。
>
> 一个聪明的办法是：
>
> 1. **签到/标记**: 每当一个学号为 `x` 的学生进来，你就让他去**第 `x` 号座位**上，把椅子翻转过来，表示这个座位号对应的学生**已经到场**。如果椅子已经是翻转的，就不用再动了（说明这个学号的双胞胎已经来过了）。
> 2. **检查/提取**: 等所有到场的学生都完成“翻椅子”的动作后，你从 1 号座位走到 n 号座位。凡是**椅子没有被翻转**的，就说明这个座位号对应的学生缺席了。